(self.webpackChunktfin_ui_project_template=self.webpackChunktfin_ui_project_template||[]).push([[983],{7757:function(e,t,n){e.exports=n(9727)},6481:function(e,t,n){"use strict";n.r(t);var o=n(5861),r=n(1413),s=n(4925),i=n(5671),a=n(3144),l=n(9340),c=n(5716),u=n(7757),h=n.n(u),p=n(1694),d=n.n(p),f=n(2672),g=n(3856),C=n(4817),v=n(2249),w=n(1386),m=n(5989),x=(n(2336),n(3703)),y=n(9709),Z=n(7314),k=n(184),b=["contextCls"],S=["contextCls"],E=["contextCls"],P=["isSuccess","errors"];(0,g.YV)({defaultTranslations:{"en-US":function(){return n.e(661).then(n.t.bind(n,6661,19))}},partnerId:"walmart",shouldLoadStrings:!1});var A=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={shouldShowChooseOptionWindow:!1,shouldShowErrorPage:!1,shouldShowHoopWindow:!1},e.renderHoopWindow=function(){var t=e.props,n=t.contextCls,o=(0,s.Z)(t,b),i=e.state.chatConfigs;return(0,k.jsx)(w.Z,(0,r.Z)((0,r.Z)({contextCls:d()(e.baseCls,n),hoop:i.hoop,isLeaveAgentMessageEnabled:i.isLeaveAgentMessageEnabled},o),i))},e.renderChooseOptionWindow=function(){var t=e.props,n=t.contextCls,o=(0,s.Z)(t,S),i=e.state.chatConfigs;return(0,k.jsx)(C.Z,(0,r.Z)((0,r.Z)({contextCls:d()(e.baseCls,n),ewt:i.ewt},o),i))},e.renderErrorPage=function(){var t=e.props,n=t.contextCls,o=(0,s.Z)(t,E);return(0,k.jsx)(v.Z,(0,r.Z)({contextCls:d()(e.baseCls,n),icon:"WarningAlert",windowTitle:"Chat with an agent",headText:"There was a problem connecting to chat support",subText:"Please try again later."},o))},e.destoryClient=(0,o.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.Z.destoryClient();case 2:case"end":return e.stop()}}),e)}))),e.baseCls="web-chat-module",e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.state.isDesignTokenApplied,t=this.props.isI18nReady;return e&&t&&this.renderContent()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.accessToken,n=e.applicationId,o=e.prefixAPIUrl;t&&(y.Z.accessToken=t),n&&(y.Z.applicationId=n),o&&(y.Z.prefixAPIUrl=o),this.setContainerElementStyle(),this.fetchConfig(),this.applyDesignToken()}},{key:"componentWillUnmount",value:function(){this.restoreContainerElementStyle(),this.destoryClient()}},{key:"renderContent",value:function(){var e=this.state,t=e.shouldShowChooseOptionWindow,n=e.shouldShowErrorPage,o=e.shouldShowHoopWindow;return(0,k.jsxs)(k.Fragment,{children:[t&&this.renderChooseOptionWindow(),o&&this.renderHoopWindow(),n&&this.renderErrorPage()]})}},{key:"fetchConfig",value:function(){var e=(0,o.Z)(h().mark((function e(){var t,n,o,r,i,a,l,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,m.Z.getChatConfig();case 4:if(n=e.sent,n.isSuccess,n.errors,o=(0,s.Z)(n,P),t.chatConfigs=o,(r=window.location.href).indexOf("?"))for(i=r.split("?")[1],a=i.split("&"),l=["hoop","isAgentOnline","ewt","isLeaveAgentMessageEnabled","leaveAgentMessage","userInactiveInterval"],c=function(e){var n=a[e].split("=");l.some((function(e){return e===n[0]}))&&(Number(n[1]>=0)&&(n[1]=Number(n[1])),console.debug(typeof t.chatConfigs[n[0]]),"false"===n[1]&&(n[1]=!1),"true"===n[1]&&(n[1]=!0),t.chatConfigs[n[0]]=n[1])},u=0;u<a.length;u+=1)c(u);console.debug(2,t.chatConfigs),!0===t.chatConfigs.isAgentOnline?t.shouldShowChooseOptionWindow=!0:!1===t.chatConfigs.isAgentOnline?t.shouldShowHoopWindow=!0:t.shouldShowErrorPage=!0,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.shouldShowErrorPage=!0;case 16:return e.prev=16,this.setState(t),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"applyDesignToken",value:function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.brand,e.next=4,x.Z.import(t);case 4:this.setState({isDesignTokenApplied:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.debug(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setContainerElementStyle",value:function(){var e=this.props.containerElement;e&&(this.setState({originContainerElementPosition:e.style.position}),e.style.position="relative")}},{key:"restoreContainerElementStyle",value:function(){var e=this.props.containerElement,t=this.state.originContainerElementPosition;e&&t&&(e.style.position=t)}}]),n}(f.PureComponent);A.defaultProps={onChatWidgetClose:function(){return Promise.resolve()}},t.default=(0,g.Zh)(A)}}]);
//# sourceMappingURL=983.ce4cd6ea.chunk.js.map